# 使用网络URL播放视频的详细步骤

## 方法一：使用云存储服务（推荐）

### 1. 选择云存储平台

推荐以下几个平台（都有免费额度）：

#### 选项A：腾讯云COS（推荐，与微信小程序兼容性好）
- 官网：https://cloud.tencent.com/product/cos
- 免费额度：50GB存储空间，10GB流量/月
- 步骤：
  1. 注册腾讯云账号
  2. 开通对象存储COS服务
  3. 创建存储桶（Bucket）
  4. 上传视频文件
  5. 获取视频文件的访问URL

#### 选项B：阿里云OSS
- 官网：https://www.aliyun.com/product/oss
- 免费额度：5GB存储空间，5GB流量/月

#### 选项C：七牛云
- 官网：https://www.qiniu.com/
- 免费额度：10GB存储空间，10GB流量/月

#### 选项D：GitHub Pages（免费，适合小项目）
- 将视频上传到GitHub仓库
- 使用GitHub Pages提供的URL
- 注意：GitHub对文件大小有限制（建议<100MB）

### 2. 上传视频文件

以腾讯云COS为例：
1. 登录腾讯云控制台
2. 进入对象存储COS
3. 创建存储桶（选择公开读权限）
4. 上传你的视频文件（video1.mp4, video2.mp4, video3.mp4）
5. 获取每个视频文件的访问URL，格式类似：
   ```
   https://your-bucket-name.cos.ap-guangzhou.myqcloud.com/video1.mp4
   ```

### 3. 修改代码配置

打开 `utils/videoManager.js` 文件，修改配置：

```javascript
const config = {
  useNetworkUrl: true, // 改为 true
  baseUrl: 'https://your-bucket-name.cos.ap-guangzhou.myqcloud.com/' // 替换为你的实际URL
}
```

**注意**：baseUrl 应该是视频文件所在目录的URL，以 `/` 结尾。

### 4. 配置微信小程序合法域名

#### 在开发环境中（微信开发者工具）：
1. 打开微信开发者工具
2. 点击右上角"详情"
3. 在"本地设置"中勾选"不校验合法域名、web-view（业务域名）、TLS版本以及HTTPS证书"
4. 这样就可以在开发环境中测试了

#### 在正式环境中（发布小程序）：
1. 登录微信公众平台：https://mp.weixin.qq.com/
2. 进入"开发" -> "开发管理" -> "开发设置"
3. 找到"服务器域名" -> "downloadFile合法域名"
4. 添加你的视频服务器域名（如：`https://your-bucket-name.cos.ap-guangzhou.myqcloud.com`）
5. 保存配置

## 方法二：使用自己的服务器

### 1. 搭建简单的文件服务器

如果你有自己的服务器，可以：
1. 将视频文件上传到服务器的某个目录（如：`/var/www/video/`）
2. 配置Web服务器（Nginx/Apache）允许访问这些文件
3. 确保服务器支持HTTPS（小程序要求）

### 2. 修改代码配置

在 `utils/videoManager.js` 中：

```javascript
const config = {
  useNetworkUrl: true,
  baseUrl: 'https://your-server.com/video/' // 你的服务器地址
}
```

### 3. 配置合法域名

同样需要在微信公众平台配置你的服务器域名。

## 方法三：使用临时文件路径（仅开发测试）

如果只是临时测试，可以使用 `wx.downloadFile` 下载视频到临时目录：

```javascript
// 在 startLearning 函数中
wx.downloadFile({
  url: 'https://your-video-url.com/video1.mp4',
  success: (res) => {
    if (res.statusCode === 200) {
      this.setData({
        videoUrl: res.tempFilePath
      })
    }
  }
})
```

## 快速测试步骤（使用腾讯云COS示例）

1. **注册并开通腾讯云COS**
   - 访问：https://cloud.tencent.com/product/cos
   - 注册账号并开通服务

2. **创建存储桶**
   - 存储桶名称：例如 `my-video-bucket`
   - 地域：选择离你最近的（如：广州 ap-guangzhou）
   - 访问权限：选择"公有读私有写"

3. **上传视频文件**
   - 上传 video1.mp4, video2.mp4, video3.mp4
   - 记录文件的访问地址

4. **修改代码**
   ```javascript
   // utils/videoManager.js
   const config = {
     useNetworkUrl: true,
     baseUrl: 'https://my-video-bucket.cos.ap-guangzhou.myqcloud.com/'
   }
   ```

5. **测试**
   - 在微信开发者工具中测试
   - 记得勾选"不校验合法域名"选项

## 常见问题

### Q: 视频加载很慢怎么办？
A: 
- 使用CDN加速
- 压缩视频文件大小
- 选择离用户近的服务器地域

### Q: 视频无法播放？
A: 
- 检查URL是否正确
- 检查视频格式（建议使用MP4）
- 检查服务器是否支持HTTPS
- 检查是否配置了合法域名

### Q: 如何获取视频的完整URL？
A: 
- 腾讯云COS：在控制台点击文件，复制"对象地址"
- 确保URL格式正确，例如：`https://bucket-name.cos.region.myqcloud.com/video1.mp4`

## 推荐配置示例

```javascript
// utils/videoManager.js
const config = {
  useNetworkUrl: true, // 启用网络URL
  baseUrl: 'https://your-bucket.cos.ap-guangzhou.myqcloud.com/' // 你的COS地址
}
```

